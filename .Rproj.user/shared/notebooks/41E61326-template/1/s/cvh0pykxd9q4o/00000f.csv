"0",""
"0","# Read the full world map"
"0","world_sf <- read_sf(""https://raw.githubusercontent.com/holtzy/R-graph-gallery/master/DATA/world.geojson"")"
"0","world_sf <- world_sf %>%"
"0","  filter(!name %in% c(""Antarctica"", ""Greenland""))"
"0",""
"0","# Create a sample dataset"
"0","happiness_data <- data.frame("
"0","  Country = c("
"0","    ""France"", ""Germany"", ""United Kingdom"","
"0","    ""Japan"", ""China"", ""Vietnam"","
"0","    ""United States of America"", ""Canada"", ""Mexico"""
"0","  ),"
"0","  Continent = c("
"0","    ""Europe"", ""Europe"", ""Europe"","
"0","    ""Asia"", ""Asia"", ""Asia"","
"0","    ""North America"", ""North America"", ""North America"""
"0","  ),"
"0","  Happiness_Score = rnorm(mean = 30, sd = 20, n = 9),"
"0","  GDP_per_capita = rnorm(mean = 30, sd = 20, n = 9),"
"0","  Social_support = rnorm(mean = 30, sd = 20, n = 9),"
"0","  Healthy_life_expectancy = rnorm(mean = 30, sd = 20, n = 9)"
"0",")"
"0",""
"0","# Join the happiness data with the full world map"
"0","world_sf <- world_sf %>%"
"0","  left_join(happiness_data, by = c(""name"" = ""Country""))"
"0",""
"0",""
"0","# Create the first chart (Scatter plot)"
"0","p1 <- ggplot(world_sf, aes("
"0","  GDP_per_capita,"
"0","  Happiness_Score,"
"0","  tooltip = name,"
"0","  data_id = Continent,"
"0","  color = Continent"
"0",")) +"
"0","  geom_point_interactive(data = filter(world_sf, !is.na(Happiness_Score)), size = 4) +"
"0","  theme_minimal() +"
"0","  theme("
"0","    axis.title.x = element_blank(),"
"0","    axis.title.y = element_blank(),"
"0","    legend.position = ""none"""
"0","  )"
"0",""
"0","# Create the second chart (Bar plot)"
"0","p2 <- ggplot(world_sf, aes("
"0","  x = reorder(name, Happiness_Score),"
"0","  y = Happiness_Score,"
"0","  tooltip = name,"
"0","  data_id = Continent,"
"0","  fill = Continent"
"0",")) +"
"0","  geom_col_interactive(data = filter(world_sf, !is.na(Happiness_Score))) +"
"0","  coord_flip() +"
"0","  theme_minimal() +"
"0","  theme("
"0","    axis.title.x = element_blank(),"
"0","    axis.title.y = element_blank(),"
"0","    legend.position = ""none"""
"0","  )"
"0",""
"0","# Create the third chart (choropleth)"
"0","p3 <- ggplot() +"
"0","  geom_sf(data = world_sf, fill = ""lightgrey"", color = ""lightgrey"") +"
"0","  geom_sf_interactive("
"0","    data = filter(world_sf, !is.na(Happiness_Score)),"
"0","    aes(fill = Continent, tooltip = name, data_id = Continent)"
"0","  ) +"
"0","  coord_sf(crs = st_crs(3857)) +"
"0","  theme_void() +"
"0","  theme("
"0","    axis.title.x = element_blank(),"
"0","    axis.title.y = element_blank(),"
"0","    legend.position = ""none"""
"0","  )"
"0",""
"0","# Combine the plots"
"0","combined_plot <- (p1 + p2) / p3 + plot_layout(heights = c(1, 2))"
"0",""
"0","# Create the interactive plot"
"0","interactive_plot <- girafe(ggobj = combined_plot)"
"0","interactive_plot <- girafe_options("
"0","  interactive_plot,"
"0","  opts_hover(css = ""fill:red;stroke:black;"")"
"0",")"
"0",""
"0","interactive_plot"
